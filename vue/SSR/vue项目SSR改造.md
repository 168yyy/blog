## vue（vue-cil2.0）项目改造成SSR

**Ps：网上看了好多服务器渲染的例子，基本都是从0开始的，用Nuxt或者vue官网推荐的ssr方案（vue-server-renderer），但是我们在开发过程中基本上是已经有了现有的项目了，我们所要做的是对现有项目的SSR改造。那么这里，跟我一起对一个vue-cil2.0生成的项目进行SSR改造**

---

### 一、改造技术的分析对比。

一般来说，我们做seo有两种方式：  

1、预渲染

我在性能优化的博客中说过，预渲染的问题，预渲染是一个方案，使用爬虫技术。由于我们打包过后的都是一些js文件，使用一些技术（puppeteer）可以爬取到项目在chrome浏览器展示的页面，然后把它写入js,和打包文件一起。  

类似**prerender-spa-plugin** 。最大的特点就是，所有获取的数据都是静态的，比如说你的页面首页有新闻，是通过接口获取的，当你在2019-11-30打包之后，不管用户在2020年也是看到的2019-11-30的新闻，当然的爬虫爬到的也是。  

如果你只需要改善少数页面（例如 /, /about, /contact 等）的 SEO，那么你可能需要预渲染

2、服务端渲染

服务端渲染是将完整的 html 输出到客户端，又被认为是‘同构’或‘通用’，如果你的项目有大量的detail页面，相互特别频繁，建议选择服务端渲染。  

**服务端渲染除了SEO还有很多时候用作首屏优化，加快首屏速度，提高用户体验。**但是对服务器有要求，网络传输数据量大，占用部分服务器运算资源。  

由于三大框架的兴起，SPA项目到处都是，所以涌现了一批nuxt.js、next.js这些服务器渲染的框架。但是这些框架构建出来的项目可能文件夹和我们现有的项目很大不一样，所以本文章主要是用**vue-server-renderer**来对现有项目进行改造，而不是去用框架。

---

### 二、改造前后目录文件对比

---

### 三、webpack添加客户端与服务端配置

--- 

### 四、vue实例、router改造

--- 

### 五、数据预取和存储

--- 

### 六、热更新与本地调试

